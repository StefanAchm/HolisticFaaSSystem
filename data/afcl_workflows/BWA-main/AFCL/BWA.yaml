---
name: "BWAFC"
dataIns:
- name: "output_buckets"
  type: "collection"
  source: "output_buckets"
- name: "aws_access_key_id"
  type: "string"
  source: "aws_access_key_id"
- name: "aws_secret_key"
  type: "string"
  source: "aws_secret_key"
- name: "aws_session_token"
  type: "string"
  source: "aws_session_token"
- name: "gcp_project_id"
  type: "string"
  source: "gcp_project_id"
- name: "gcp_private_key"
  type: "string"
  source: "gcp_private_key"
- name: "gcp_client_email"
  type: "string"
  source: "gcp_client_email"
- name: "fastaFolder"
  type: "collection"
  source: "fastaFolder"
- name: "fasta"
  type: "string"
  source: "fasta"
- name: "R1"
  type: "string"
  source: "R1"
- name: "R2"
  type: "string"
  source: "R2"
- name: "folders"
  type: "collection"
  source: "folders"
- name: "folderindex"
  type: "collection"
  source: "folderindex"
- name: "chunks"
  type: "number"
  source: "chunks"
workflowBody:
- parallel:
    name: "parallelized_pFasta"
    dataIns:
    - name: "output_buckets"
      type: "collection"
      source: "BWAFC/output_buckets"
    - name: "aws_access_key_id"
      type: "string"
      source: "BWAFC/aws_access_key_id"
    - name: "aws_secret_key"
      type: "string"
      source: "BWAFC/aws_secret_key"
    - name: "aws_session_token"
      type: "string"
      source: "BWAFC/aws_session_token"
    - name: "gcp_project_id"
      type: "string"
      source: "BWAFC/gcp_project_id"
    - name: "gcp_private_key"
      type: "string"
      source: "BWAFC/gcp_private_key"
    - name: "gcp_client_email"
      type: "string"
      source: "BWAFC/gcp_client_email"
    - name: "fastaFolder"
      type: "collection"
      source: "BWAFC/fastaFolder"
    - name: "fasta"
      type: "string"
      source: "BWAFC/fasta"
    - name: "R1"
      type: "string"
      source: "BWAFC/R1"
    - name: "R2"
      type: "string"
      source: "BWAFC/R2"
    - name: "folderindex"
      type: "collection"
      source: "BWAFC/folderindex"
    - name: "folders"
      type: "collection"
      source: "BWAFC/folders"
    - name: "chunks"
      type: "number"
      source: "BWAFC/chunks"
    parallelBody:
    - section:
      - parallelFor:
          name: "pFor"
          dataIns:
          - name: "output_buckets"
            type: "collection"
            source: "parallelized_pFasta/output_buckets"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_access_key_id"
            type: "string"
            source: "parallelized_pFasta/aws_access_key_id"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_secret_key"
            type: "string"
            source: "parallelized_pFasta/aws_secret_key"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_session_token"
            type: "string"
            source: "parallelized_pFasta/aws_session_token"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_project_id"
            type: "string"
            source: "parallelized_pFasta/gcp_project_id"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_private_key"
            type: "string"
            source: "parallelized_pFasta/gcp_private_key"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_client_email"
            type: "string"
            source: "parallelized_pFasta/gcp_client_email"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "fastaFolder"
            type: "collection"
            source: "parallelized_pFasta/fastaFolder"
            constraints:
            - name: "distribution"
              value: "BLOCK(1)"
          - name: "fasta"
            type: "string"
            source: "parallelized_pFasta/fasta"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "R1"
            type: "string"
            source: "parallelized_pFasta/R1"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "R2"
            type: "string"
            source: "parallelized_pFasta/R2"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "folderindex"
            type: "collection"
            source: "parallelized_pFasta/folderindex"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "folders"
            type: "collection"
            source: "parallelized_pFasta/folders"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "chunks"
            type: "number"
            source: "parallelized_pFasta/chunks"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          loopCounter:
            from: "0"
            to: "1"
            step: "1"
          loopBody:
          - parallelFor:
              name: "pFasta"
              dataIns:
              - name: "output_buckets"
                type: "collection"
                source: "pFor/output_buckets"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              - name: "aws_access_key_id"
                type: "string"
                source: "pFor/aws_access_key_id"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              - name: "aws_secret_key"
                type: "string"
                source: "pFor/aws_secret_key"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              - name: "aws_session_token"
                type: "string"
                source: "pFor/aws_session_token"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              - name: "gcp_project_id"
                type: "string"
                source: "pFor/gcp_project_id"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              - name: "gcp_private_key"
                type: "string"
                source: "pFor/gcp_private_key"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              - name: "gcp_client_email"
                type: "string"
                source: "pFor/gcp_client_email"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              - name: "fastaFolder"
                type: "string"
                source: "pFor/fastaFolder"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              - name: "fasta"
                type: "string"
                source: "pFor/fasta"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              - name: "folders"
                type: "string"
                source: "pFor/folders"
                constraints:
                - name: "distribution"
                  value: "BLOCK(1)"
              - name: "folderindex"
                type: "number"
                source: "pFor/folderindex"
                constraints:
                - name: "distribution"
                  value: "BLOCK(1)"
              - name: "R1"
                type: "string"
                source: "pFor/R1"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              - name: "R2"
                type: "string"
                source: "pFor/R2"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              - name: "chunks"
                type: "number"
                source: "pFor/chunks"
                constraints:
                - name: "distribution"
                  value: "REPLICATE(*)"
              loopCounter:
                from: "0"
                to: "4"
                step: "1"
              loopBody:
              - function:
                  name: "bwaSplit"
                  type: "bwaSplitType"
                  dataIns:
                  - name: "output_buckets"
                    type: "collection"
                    source: "pFasta/output_buckets"
                  - name: "aws_access_key_id"
                    type: "string"
                    source: "pFasta/aws_access_key_id"
                  - name: "aws_secret_key"
                    type: "string"
                    source: "pFasta/aws_secret_key"
                  - name: "aws_session_token"
                    type: "string"
                    source: "pFasta/aws_session_token"
                  - name: "gcp_project_id"
                    type: "string"
                    source: "pFasta/gcp_project_id"
                  - name: "gcp_private_key"
                    type: "string"
                    source: "pFasta/gcp_private_key"
                  - name: "gcp_client_email"
                    type: "string"
                    source: "pFasta/gcp_client_email"
                  - name: "fastaFolder"
                    type: "string"
                    source: "pFasta/fastaFolder"
                  - name: "fasta"
                    type: "string"
                    source: "pFasta/fasta"
                  - name: "R1"
                    type: "string"
                    source: "pFasta/R1"
                    passing: true
                  - name: "R2"
                    type: "string"
                    source: "pFasta/R2"
                    passing: true
                  - name: "folders"
                    type: "string"
                    source: "pFasta/folders"
                  - name: "folderindex"
                    type: "number"
                    source: "pFasta/folderindex"
                  - name: "chunks"
                    type: "number"
                    source: "pFasta/chunks"
                  dataOuts:
                  - name: "output_buckets"
                    type: "collection"
                  - name: "aws_access_key_id"
                    type: "string"
                  - name: "aws_secret_key"
                    type: "string"
                  - name: "aws_session_token"
                    type: "string"
                  - name: "gcp_project_id"
                    type: "string"
                  - name: "gcp_private_key"
                    type: "string"
                  - name: "gcp_client_email"
                    type: "string"
                  - name: "fasta"
                    type: "string"
                  properties:
                  - name: "resource"
                    value: "python:<TODO>"
              - function:
                  name: "bwaIndex"
                  type: "bwaIndexType"
                  dataIns:
                  - name: "output_buckets"
                    type: "collection"
                    source: "bwaSplit/output_buckets"
                  - name: "aws_access_key_id"
                    type: "string"
                    source: "bwaSplit/aws_access_key_id"
                  - name: "aws_secret_key"
                    type: "string"
                    source: "bwaSplit/aws_secret_key"
                  - name: "aws_session_token"
                    type: "string"
                    source: "bwaSplit/aws_session_token"
                  - name: "gcp_project_id"
                    type: "string"
                    source: "bwaSplit/gcp_project_id"
                  - name: "gcp_private_key"
                    type: "string"
                    source: "bwaSplit/gcp_private_key"
                  - name: "gcp_client_email"
                    type: "string"
                    source: "bwaSplit/gcp_client_email"
                  - name: "fasta"
                    type: "string"
                    source: "bwaSplit/fasta"
                  - name: "R1"
                    type: "string"
                    source: "bwaSplit/R1"
                    passing: true
                  - name: "R2"
                    type: "string"
                    source: "bwaSplit/R2"
                    passing: true
                  dataOuts:
                  - name: "output_buckets"
                    type: "collection"
                  - name: "aws_access_key_id"
                    type: "string"
                  - name: "aws_secret_key"
                    type: "string"
                  - name: "aws_session_token"
                    type: "string"
                  - name: "gcp_project_id"
                    type: "string"
                  - name: "gcp_private_key"
                    type: "string"
                  - name: "gcp_client_email"
                    type: "string"
                  - name: "fastaIndexed"
                    type: "string"
                  - name: "chunk_folder"
                    type: "string"
                  properties:
                  - name: "resource"
                    value: "python:<TODO>"
              - parallel:
                  name: "parALN"
                  dataIns:
                  - name: "output_buckets"
                    type: "collection"
                    source: "bwaIndex/output_buckets"
                  - name: "aws_access_key_id"
                    type: "string"
                    source: "bwaIndex/aws_access_key_id"
                  - name: "aws_secret_key"
                    type: "string"
                    source: "bwaIndex/aws_secret_key"
                  - name: "aws_session_token"
                    type: "string"
                    source: "bwaIndex/aws_session_token"
                  - name: "gcp_project_id"
                    type: "string"
                    source: "bwaIndex/gcp_project_id"
                  - name: "gcp_private_key"
                    type: "string"
                    source: "bwaIndex/gcp_private_key"
                  - name: "gcp_client_email"
                    type: "string"
                    source: "bwaIndex/gcp_client_email"
                  - name: "fastaIndexed"
                    type: "string"
                    source: "bwaIndex/fastaIndexed"
                  - name: "R1"
                    type: "string"
                    source: "bwaIndex/R1"
                  - name: "R2"
                    type: "string"
                    source: "bwaIndex/R2"
                  - name: "chunk_folder"
                    type: "string"
                    source: "bwaIndex/chunk_folder"
                  parallelBody:
                  - section:
                    - function:
                        name: "bwaAlnR1"
                        type: "bwaAlnR1Type"
                        dataIns:
                        - name: "output_buckets"
                          type: "collection"
                          source: "parALN/output_buckets"
                        - name: "aws_access_key_id"
                          type: "string"
                          source: "parALN/aws_access_key_id"
                        - name: "aws_secret_key"
                          type: "string"
                          source: "parALN/aws_secret_key"
                        - name: "aws_session_token"
                          type: "string"
                          source: "parALN/aws_session_token"
                        - name: "gcp_project_id"
                          type: "string"
                          source: "parALN/gcp_project_id"
                        - name: "gcp_private_key"
                          type: "string"
                          source: "parALN/gcp_private_key"
                        - name: "gcp_client_email"
                          type: "string"
                          source: "parALN/gcp_client_email"
                        - name: "chunk_folder"
                          type: "string"
                          source: "parALN/chunk_folder"
                        - name: "fastaIndexed"
                          type: "string"
                          source: "parALN/fastaIndexed"
                        - name: "R1"
                          type: "string"
                          source: "parALN/R1"
                        dataOuts:
                        - name: "aln1"
                          type: "string"
                        properties:
                        - name: "resource"
                          value: "python:<TODO>"
                  - section:
                    - function:
                        name: "bwaAlnR2"
                        type: "bwaAlnR2Type"
                        dataIns:
                        - name: "output_buckets"
                          type: "collection"
                          source: "parALN/output_buckets"
                        - name: "aws_access_key_id"
                          type: "string"
                          source: "parALN/aws_access_key_id"
                        - name: "aws_secret_key"
                          type: "string"
                          source: "parALN/aws_secret_key"
                        - name: "aws_session_token"
                          type: "string"
                          source: "parALN/aws_session_token"
                        - name: "gcp_project_id"
                          type: "string"
                          source: "parALN/gcp_project_id"
                        - name: "gcp_private_key"
                          type: "string"
                          source: "parALN/gcp_private_key"
                        - name: "gcp_client_email"
                          type: "string"
                          source: "parALN/gcp_client_email"
                        - name: "fastaIndexed"
                          type: "string"
                          source: "parALN/fastaIndexed"
                        - name: "R2"
                          type: "string"
                          source: "parALN/R2"
                        - name: "chunk_folder"
                          type: "string"
                          source: "parALN/chunk_folder"
                        dataOuts:
                        - name: "aln2"
                          type: "string"
                        - name: "output_buckets"
                          type: "collection"
                        - name: "aws_access_key_id"
                          type: "string"
                        - name: "aws_secret_key"
                          type: "string"
                        - name: "aws_session_token"
                          type: "string"
                        - name: "gcp_project_id"
                          type: "string"
                        - name: "gcp_private_key"
                          type: "string"
                        - name: "gcp_client_email"
                          type: "string"
                        - name: "chunk_folder"
                          type: "string"
                        properties:
                        - name: "resource"
                          value: "python:<TODO>"
                  dataOuts:
                  - name: "aln"
                    type: "collection"
                    source: "parALN/fastaIndexed,bwaAlnR1/aln1,bwaAlnR2/aln2,parALN/R1,parALN/R2"
                  - name: "output_buckets"
                    type: "collection"
                    source: "parALN/output_buckets"
                  - name: "aws_access_key_id"
                    type: "string"
                    source: "parALN/aws_access_key_id"
                  - name: "aws_secret_key"
                    type: "string"
                    source: "parALN/aws_secret_key"
                  - name: "aws_session_token"
                    type: "string"
                    source: "parALN/aws_session_token"
                  - name: "gcp_project_id"
                    type: "string"
                    source: "parALN/gcp_project_id"
                  - name: "gcp_private_key"
                    type: "string"
                    source: "parALN/gcp_private_key"
                  - name: "gcp_client_email"
                    type: "string"
                    source: "parALN/gcp_client_email"
                  - name: "chunk_folder"
                    type: "string"
                    source: "parALN/chunk_folder"
              - function:
                  name: "bwaSampe"
                  type: "bwaSampeType"
                  dataIns:
                  - name: "output_buckets"
                    type: "collection"
                    source: "parALN/output_buckets"
                  - name: "aws_access_key_id"
                    type: "string"
                    source: "parALN/aws_access_key_id"
                  - name: "aws_secret_key"
                    type: "string"
                    source: "parALN/aws_secret_key"
                  - name: "aws_session_token"
                    type: "string"
                    source: "parALN/aws_session_token"
                  - name: "gcp_project_id"
                    type: "string"
                    source: "parALN/gcp_project_id"
                  - name: "gcp_private_key"
                    type: "string"
                    source: "parALN/gcp_private_key"
                  - name: "gcp_client_email"
                    type: "string"
                    source: "parALN/gcp_client_email"
                  - name: "aln"
                    type: "collection"
                    source: "parALN/aln"
                  - name: "chunk_folder"
                    type: "string"
                    source: "parALN/chunk_folder"
                  dataOuts:
                  - name: "output_buckets"
                    type: "collection"
                  - name: "aws_access_key_id"
                    type: "string"
                  - name: "aws_secret_key"
                    type: "string"
                  - name: "aws_session_token"
                    type: "string"
                  - name: "gcp_project_id"
                    type: "string"
                  - name: "gcp_private_key"
                    type: "string"
                  - name: "gcp_client_email"
                    type: "string"
                  - name: "sam"
                    type: "string"
                  properties:
                  - name: "resource"
                    value: "python:<TODO>"
              dataOuts:
              - name: "output_buckets"
                type: "collection"
                source: "bwaSampe/output_buckets"
              - name: "aws_access_key_id"
                type: "string"
                source: "bwaSampe/aws_access_key_id"
              - name: "aws_secret_key"
                type: "string"
                source: "bwaSampe/aws_secret_key"
              - name: "aws_session_token"
                type: "string"
                source: "bwaSampe/aws_session_token"
              - name: "gcp_project_id"
                type: "string"
                source: "bwaSampe/gcp_project_id"
              - name: "gcp_private_key"
                type: "string"
                source: "bwaSampe/gcp_private_key"
              - name: "gcp_client_email"
                type: "string"
                source: "bwaSampe/gcp_client_email"
              - name: "sam"
                type: "collection"
                source: "bwaSampe/sam"
          - function:
              name: "bwaMerge"
              type: "bwaMergeType"
              dataIns:
              - name: "output_buckets"
                type: "collection"
                source: "pFasta/output_buckets"
              - name: "aws_access_key_id"
                type: "string"
                source: "pFasta/aws_access_key_id"
              - name: "aws_secret_key"
                type: "string"
                source: "pFasta/aws_secret_key"
              - name: "aws_session_token"
                type: "string"
                source: "pFasta/aws_session_token"
              - name: "gcp_project_id"
                type: "string"
                source: "pFasta/gcp_project_id"
              - name: "gcp_private_key"
                type: "string"
                source: "pFasta/gcp_private_key"
              - name: "gcp_client_email"
                type: "string"
                source: "pFasta/gcp_client_email"
              - name: "sam"
                type: "collection"
                source: "pFasta/sam"
              dataOuts:
              - name: "samMerged"
                type: "string"
              - name: "output_buckets"
                type: "collection"
              - name: "aws_access_key_id"
                type: "string"
              - name: "aws_secret_key"
                type: "string"
              - name: "aws_session_token"
                type: "string"
              - name: "gcp_project_id"
                type: "string"
              - name: "gcp_private_key"
                type: "string"
              - name: "gcp_client_email"
                type: "string"
              properties:
              - name: "resource"
                value: "python:<TODO>"
          - function:
              name: "bwaSort"
              type: "bwaSortType"
              dataIns:
              - name: "output_buckets"
                type: "collection"
                source: "bwaMerge/output_buckets"
              - name: "aws_access_key_id"
                type: "string"
                source: "bwaMerge/aws_access_key_id"
              - name: "aws_secret_key"
                type: "string"
                source: "bwaMerge/aws_secret_key"
              - name: "aws_session_token"
                type: "string"
                source: "bwaMerge/aws_session_token"
              - name: "gcp_project_id"
                type: "string"
                source: "bwaMerge/gcp_project_id"
              - name: "gcp_private_key"
                type: "string"
                source: "bwaMerge/gcp_private_key"
              - name: "gcp_client_email"
                type: "string"
                source: "bwaMerge/gcp_client_email"
              - name: "samMerged"
                type: "string"
                source: "bwaMerge/samMerged"
              dataOuts:
              - name: "bam"
                type: "string"
              - name: "bambai"
                type: "string"
              properties:
              - name: "resource"
                value: "python:<TODO>"
          dataOuts:
          - name: "bam"
            type: "collection"
            source: "bwaSort/bam"
          - name: "bambai"
            type: "string"
            source: "bwaSort/bambai"
    dataOuts:
    - name: "bam"
      type: "collection"
      source: "pFor/bam"
    - name: "bambai"
      type: "collection"
      source: "pFor/bambai"
dataOuts:
- name: "bam"
  type: "collection"
  source: "parallelized_pFasta/bam"
- name: "bambai"
  type: "collection"
  source: "parallelized_pFasta/bambai"

