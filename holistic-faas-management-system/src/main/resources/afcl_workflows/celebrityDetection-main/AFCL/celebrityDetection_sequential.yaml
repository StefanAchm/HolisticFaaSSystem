---
name: "DAECC"
dataIns:
- name: "imagepaths"
  type: "collection"
  source: "imagepaths"
- name: "destinationPath"
  type: "string"
  source: "destinationPath"
- name: "aws_access_key_id"
  type: "string"
  source: "aws_access_key_id"
- name: "aws_secret_key"
  type: "string"
  source: "aws_secret_key"
- name: "aws_session_token"
  type: "string"
  source: "aws_session_token"
- name: "gcp_project_id"
  type: "string"
  source: "gcp_project_id"
- name: "gcp_private_key"
  type: "string"
  source: "gcp_private_key"
- name: "gcp_client_email"
  type: "string"
  source: "gcp_client_email"
workflowBody:
- function:
    name: "distributeWorkload"
    type: "distributeWorkload"
    dataIns:
    - name: "imagepaths"
      type: "collection"
      source: "DAECC/imagepaths"
    - name: "destinationPath"
      type: "string"
      source: "DAECC/destinationPath"
      passing: true
    - name: "aws_access_key_id"
      type: "string"
      source: "DAECC/aws_access_key_id"
    - name: "aws_secret_key"
      type: "string"
      source: "DAECC/aws_secret_key"
    - name: "aws_session_token"
      type: "string"
      source: "DAECC/aws_session_token"
    - name: "gcp_project_id"
      type: "string"
      source: "DAECC/gcp_project_id"
    - name: "gcp_private_key"
      type: "string"
      source: "DAECC/gcp_private_key"
    - name: "gcp_client_email"
      type: "string"
      source: "DAECC/gcp_client_email"
    dataOuts:
    - name: "images"
      type: "collection"
    - name: "imageCount"
      type: "number"
    - name: "aws_access_key_id"
      type: "string"
    - name: "aws_secret_key"
      type: "string"
    - name: "aws_session_token"
      type: "string"
    - name: "gcp_project_id"
      type: "string"
    - name: "gcp_private_key"
      type: "string"
    - name: "gcp_client_email"
      type: "string"
    properties:
    - name: "resource"
      value: "python:TODO"
- parallelFor:
    name: "ParallelFor0"
    dataIns:
    - name: "image"
      type: "string"
      source: "distributeWorkload/images"
      constraints:
      - name: "distribution"
        value: "BLOCK(1)"
    - name: "destinationPath"
      type: "string"
      source: "distributeWorkload/destinationPath"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    - name: "aws_access_key_id"
      type: "string"
      source: "distributeWorkload/aws_access_key_id"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    - name: "aws_secret_key"
      type: "string"
      source: "distributeWorkload/aws_secret_key"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    - name: "aws_session_token"
      type: "string"
      source: "distributeWorkload/aws_session_token"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    - name: "gcp_project_id"
      type: "string"
      source: "distributeWorkload/gcp_project_id"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    - name: "gcp_private_key"
      type: "string"
      source: "distributeWorkload/gcp_private_key"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    - name: "gcp_client_email"
      type: "string"
      source: "distributeWorkload/gcp_client_email"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    loopCounter:
      type: "number"
      from: "0"
      to: "distributeWorkload/imageCount"
      step: "1"
    loopBody:
    - function:
        name: "detectCelebrities"
        type: "detectCelebrities"
        dataIns:
        - name: "image"
          type: "string"
          source: "ParallelFor0/image"
        - name: "destinationPath"
          type: "string"
          source: "ParallelFor0/destinationPath"
          passing: true
        - name: "aws_access_key_id"
          type: "string"
          source: "ParallelFor0/aws_access_key_id"
          passing: true
        - name: "aws_secret_key"
          type: "string"
          source: "ParallelFor0/aws_secret_key"
          passing: true
        - name: "aws_session_token"
          type: "string"
          source: "ParallelFor0/aws_session_token"
          passing: true
        - name: "gcp_project_id"
          type: "string"
          source: "ParallelFor0/gcp_project_id"
        - name: "gcp_private_key"
          type: "string"
          source: "ParallelFor0/gcp_private_key"
        - name: "gcp_client_email"
          type: "string"
          source: "ParallelFor0/gcp_client_email"
        dataOuts:
        - name: "celebrities"
          type: "collection"
        - name: "image"
          type: "string"
        - name: "gcp_project_id"
          type: "string"
        - name: "gcp_private_key"
          type: "string"
        - name: "gcp_client_email"
          type: "string"
        properties:
        - name: "resource"
          value: "python:TODO"
    - function:
        name: "cropFaces"
        type: "cropFaces"
        dataIns:
        - name: "destinationPath"
          type: "string"
          source: "detectCelebrities/destinationPath"
        - name: "image"
          type: "string"
          source: "detectCelebrities/image"
        - name: "celebrities"
          type: "collection"
          source: "detectCelebrities/celebrities"
        - name: "aws_access_key_id"
          type: "string"
          source: "detectCelebrities/aws_access_key_id"
        - name: "aws_secret_key"
          type: "string"
          source: "detectCelebrities/aws_secret_key"
        - name: "aws_session_token"
          type: "string"
          source: "detectCelebrities/aws_session_token"
        - name: "gcp_project_id"
          type: "string"
          source: "detectCelebrities/gcp_project_id"
        - name: "gcp_private_key"
          type: "string"
          source: "detectCelebrities/gcp_private_key"
        - name: "gcp_client_email"
          type: "string"
          source: "detectCelebrities/gcp_client_email"
        dataOuts:
        - name: "destinationPath"
          type: "string"
        - name: "aws_access_key_id"
          type: "string"
        - name: "aws_secret_key"
          type: "string"
        - name: "aws_session_token"
          type: "string"
        - name: "gcp_project_id"
          type: "string"
        - name: "gcp_private_key"
          type: "string"
        - name: "gcp_client_email"
          type: "string"
        properties:
        - name: "resource"
          value: "python:TODO"
    dataOuts:
    - name: "destinationPath"
      type: "string"
      source: "cropFaces/destinationPath"
    - name: "aws_access_key_id"
      type: "string"
      source: "cropFaces/aws_access_key_id"
    - name: "aws_secret_key"
      type: "string"
      source: "cropFaces/aws_secret_key"
    - name: "aws_session_token"
      type: "string"
      source: "cropFaces/aws_session_token"
    - name: "gcp_project_id"
      type: "string"
      source: "cropFaces/gcp_project_id"
    - name: "gcp_private_key"
      type: "string"
      source: "cropFaces/gcp_private_key"
    - name: "gcp_client_email"
      type: "string"
      source: "cropFaces/gcp_client_email"
    constraints:
    - name: "concurrency"
      value: "10"
- function:
    name: "distributeWorkload0"
    type: "distributeWorkload0"
    dataIns:
    - name: "destinationPath"
      type: "string"
      source: "ParallelFor0/destinationPath"
    - name: "aws_access_key_id"
      type: "string"
      source: "ParallelFor0/aws_access_key_id"
    - name: "aws_secret_key"
      type: "string"
      source: "ParallelFor0/aws_secret_key"
    - name: "aws_session_token"
      type: "string"
      source: "ParallelFor0/aws_session_token"
    - name: "gcp_project_id"
      type: "string"
      source: "ParallelFor0/gcp_project_id"
    - name: "gcp_private_key"
      type: "string"
      source: "ParallelFor0/gcp_private_key"
    - name: "gcp_client_email"
      type: "string"
      source: "ParallelFor0/gcp_client_email"
    dataOuts:
    - name: "celebrityFolders"
      type: "collection"
    - name: "celebrityFolderCount"
      type: "number"
    - name: "aws_access_key_id"
      type: "string"
    - name: "aws_secret_key"
      type: "string"
    - name: "aws_session_token"
      type: "string"
    - name: "gcp_project_id"
      type: "string"
    - name: "gcp_private_key"
      type: "string"
    - name: "gcp_client_email"
      type: "string"
    properties:
    - name: "resource"
      value: "python:TODO"
- parallelFor:
    name: "ParallelFor1"
    dataIns:
    - name: "celebrityFolder"
      type: "string"
      source: "distributeWorkload0/celebrityFolders"
      constraints:
      - name: "distribution"
        value: "BLOCK(1)"
    - name: "aws_access_key_id"
      type: "string"
      source: "distributeWorkload0/aws_access_key_id"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    - name: "aws_secret_key"
      type: "string"
      source: "distributeWorkload0/aws_secret_key"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    - name: "aws_session_token"
      type: "string"
      source: "distributeWorkload0/aws_session_token"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    - name: "gcp_project_id"
      type: "string"
      source: "distributeWorkload0/gcp_project_id"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    - name: "gcp_private_key"
      type: "string"
      source: "distributeWorkload0/gcp_private_key"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    - name: "gcp_client_email"
      type: "string"
      source: "distributeWorkload0/gcp_client_email"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    loopCounter:
      type: "number"
      from: "0"
      to: "distributeWorkload0/celebrityFolderCount"
      step: "1"
    loopBody:
    - function:
        name: "createCollage"
        type: "createCollage"
        dataIns:
        - name: "celebrityFolder"
          type: "string"
          source: "ParallelFor1/celebrityFolder"
        - name: "aws_access_key_id"
          type: "string"
          source: "ParallelFor1/aws_access_key_id"
        - name: "aws_secret_key"
          type: "string"
          source: "ParallelFor1/aws_secret_key"
        - name: "aws_session_token"
          type: "string"
          source: "ParallelFor1/aws_session_token"
        - name: "gcp_project_id"
          type: "string"
          source: "ParallelFor1/gcp_project_id"
        - name: "gcp_private_key"
          type: "string"
          source: "ParallelFor1/gcp_private_key"
        - name: "gcp_client_email"
          type: "string"
          source: "ParallelFor1/gcp_client_email"
        dataOuts:
        - name: "celebrityFolder"
          type: "string"
        - name: "aws_access_key_id"
          type: "string"
        - name: "aws_secret_key"
          type: "string"
        - name: "aws_session_token"
          type: "string"
        - name: "gcp_project_id"
          type: "string"
        - name: "gcp_private_key"
          type: "string"
        - name: "gcp_client_email"
          type: "string"
        properties:
        - name: "resource"
          value: "python:TODO"
    - function:
        name: "summaryTranslate"
        type: "summaryTranslate"
        dataIns:
        - name: "celebrityFolder"
          type: "string"
          source: "createCollage/celebrityFolder"
        - name: "aws_access_key_id"
          type: "string"
          source: "createCollage/aws_access_key_id"
        - name: "aws_secret_key"
          type: "string"
          source: "createCollage/aws_secret_key"
        - name: "aws_session_token"
          type: "string"
          source: "createCollage/aws_session_token"
        - name: "gcp_project_id"
          type: "string"
          source: "createCollage/gcp_project_id"
        - name: "gcp_private_key"
          type: "string"
          source: "createCollage/gcp_private_key"
        - name: "gcp_client_email"
          type: "string"
          source: "createCollage/gcp_client_email"
        dataOuts:
        - name: "celebrityFolder"
          type: "string"
        properties:
        - name: "resource"
          value: "python:TODO"
    constraints:
    - name: "concurrency"
      value: "10"
    dataOuts:
    - name: "celebrityFolders"
      type: "collection"
      source: "summaryTranslate/celebrityFolder"
dataOuts:
- name: "celebrityFolders"
  type: "collection"
  source: "ParallelFor1/celebrityFolders"
